# üöõ Freight Rate Calculator

**FreightRateCalculator** ‚Äî —ç—Ç–æ backend-–ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –Ω–∞ –±–∞–∑–µ **Spring Boot**, –ø—Ä–µ–¥–Ω–∞–∑–Ω–∞—á–µ–Ω–Ω–æ–µ –¥–ª—è —Ä–∞—Å—á—ë—Ç–∞ —Ç–∞—Ä–∏—Ñ–æ–≤ –≥—Ä—É–∑–æ–ø–µ—Ä–µ–≤–æ–∑–æ–∫.

---
## üéØ –û –ø—Ä–æ–µ–∫—Ç–µ
**Pet-–ø—Ä–æ–µ–∫—Ç** —Ä–∞–∑—Ä–∞–±–æ—Ç–∞–Ω –∫–∞–∫ –¥–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü–∏—è –ø—Ä–∞–∫—Ç–∏—á–µ—Å–∫–∏—Ö –Ω–∞–≤—ã–∫–æ–≤ —Ä–∞–±–æ—Ç—ã —Å **Spring Boot** –∏ –ø–æ—Å—Ç—Ä–æ–µ–Ω–∏—è –º–Ω–æ–≥–æ—Å–ª–æ–π–Ω–æ–π –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—ã. –û—Å–Ω–æ–≤–Ω–æ–π —É–ø–æ—Ä —Å–¥–µ–ª–∞–Ω –Ω–∞ –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–Ω—É—é —á–∏—Å—Ç–æ—Ç—É –∏ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å.

### üß± –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ –∏ —Å–ª–æ–∏
- –ß—ë—Ç–∫–æ–µ —Ä–∞–∑–¥–µ–ª–µ–Ω–∏–µ –Ω–∞ —Å–ª–æ–∏:
    - `Controller`, `Service`, `Repository`
    - `DTO`, `Entity`
- –°–æ–±–ª—é–¥–µ–Ω–∏–µ –ø—Ä–∏–Ω—Ü–∏–ø–æ–≤:
    - **SOLID**
    - **DRY**
    - **Clean Architecture**

### üîê –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å

- –ü–æ–ª–Ω–æ—Ü–µ–Ω–Ω–∞—è –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è –∏ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è –Ω–∞ –æ—Å–Ω–æ–≤–µ **Spring Security**
- –†–µ–∞–ª–∏–∑–∞—Ü–∏—è **JWT Access** –∏ **Refresh —Ç–æ–∫–µ–Ω–æ–≤**

### ‚öôÔ∏è –†–∞–±–æ—Ç–∞ —Å–æ Spring

- –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è —á–µ—Ä–µ–∑ `application.properties`
- –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ **DTO** –∏ **DAO** –¥–ª—è —Ä–∞–∑–¥–µ–ª–µ–Ω–∏—è —Å–ª–æ—ë–≤ –¥–∞–Ω–Ω—ã—Ö –∏ –ª–æ–≥–∏–∫–∏
- –ü–æ–ª—É—á–µ–Ω–∏–µ –∏ –æ–±—Ä–∞–±–æ—Ç–∫–∞ –¥–∞–Ω–Ω—ã—Ö —á–µ—Ä–µ–∑ **REST API**
- –ü—Ä–∏–º–µ–Ω–µ–Ω–∏–µ **Spring WebFlux** –¥–ª—è –ø–æ—Å—Ç—Ä–æ–µ–Ω–∏—è —Ä–µ–∞–∫—Ç–∏–≤–Ω—ã—Ö –∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä–æ–≤

### üìä –ò–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä–∞ –∏ —Å—Ç–∞–±–∏–ª—å–Ω–æ—Å—Ç—å

- **–õ–æ–≥–≥–∏—Ä–æ–≤–∞–Ω–∏–µ —á–µ—Ä–µ–∑ AOP (–∞—Å–ø–µ–∫—Ç—ã)**
- **–ì–ª–æ–±–∞–ª—å–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫** —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º `@ControllerAdvice`
- –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è API —á–µ—Ä–µ–∑ **SpringDoc / Swagger UI**
---

## ‚öôÔ∏è –°—Ç–µ–∫ —Ç–µ—Ö–Ω–æ–ª–æ–≥–∏–π

- **Java 17**
- **Spring Boot 3**
- **Spring WebFlux**
- **Spring Security + JWT (Access/Refresh)**
- **Spring Validation**
- **MapStruct** ‚Äî –ø—Ä–µ–æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏–µ –º–µ–∂–¥—É Entity –∏ DTO
- **Lombok**
- **Spring Data JDBC** (PostgreSQL)
- **OpenAPI (Swagger) via SpringDoc**
- **Docker** ‚Äî –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∏–∑–∞—Ü–∏—è

---

## üìÅ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞

```src
‚îú‚îÄ‚îÄ main
‚îú‚îÄ‚îÄ java
‚îÇ   ‚îî‚îÄ‚îÄ com
‚îÇ       ‚îî‚îÄ‚îÄ mcube
‚îÇ           ‚îî‚îÄ‚îÄ FreightRateCalculator
‚îÇ               ‚îú‚îÄ‚îÄ aspect           # –õ–æ–≥–≥–∏—Ä–æ–≤–∞–Ω–∏–µ
‚îÇ               ‚îú‚îÄ‚îÄ config           # –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–æ–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
‚îÇ               ‚îú‚îÄ‚îÄ controller       # REST-–∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä—ã
‚îÇ               ‚îú‚îÄ‚îÄ dto              # DTO –¥–ª—è –∑–∞–ø—Ä–æ—Å–æ–≤ –∏ –æ—Ç–≤–µ—Ç–æ–≤
‚îÇ               ‚îú‚îÄ‚îÄ entity           # –°—É—â–Ω–æ—Å—Ç–∏
‚îÇ               ‚îú‚îÄ‚îÄ exception        # –ì–ª–æ–±–∞–ª—å–Ω–∞—è –∏ –∫–∞—Å—Ç–æ–º–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫
‚îÇ               ‚îú‚îÄ‚îÄ external         # –í–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏–µ —Å –≤–Ω–µ—à–Ω–∏–º–∏ —Å–µ—Ä–≤–∏—Å–∞–º–∏
‚îÇ               ‚îú‚îÄ‚îÄ repository       # –†–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–∏ (–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å—ã –¥–æ—Å—Ç—É–ø–∞ –∫ –¥–∞–Ω–Ω—ã–º)
‚îÇ               ‚îú‚îÄ‚îÄ service          # –°–µ—Ä–≤–∏—Å–Ω—ã–π —Å–ª–æ–π (–±–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫–∞)
‚îÇ               ‚îî‚îÄ‚îÄ security
‚îÇ                   ‚îú‚îÄ‚îÄ config       # –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è Spring Security
‚îÇ                   ‚îú‚îÄ‚îÄ dto          # DTO, —Å–≤—è–∑–∞–Ω–Ω—ã–µ —Å –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–µ–π
‚îÇ                   ‚îú‚îÄ‚îÄ entity       # –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏, —Ä–æ–ª–∏ –∏ —Ç.–ø.
‚îÇ                   ‚îú‚îÄ‚îÄ repository   # –†–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–∏ –¥–ª—è —Å—É—â–Ω–æ—Å—Ç–µ–π –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏
‚îÇ                   ‚îî‚îÄ‚îÄ service      # –°–µ—Ä–≤–∏—Å—ã –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏ –∏ —Ç–æ–∫–µ–Ω–æ–≤
‚îî‚îÄ‚îÄ resources
    ‚îî‚îÄ‚îÄ application.properties       # –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
```

### üß™ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

–ü—Ä–æ–µ–∫—Ç —Å–æ–¥–µ—Ä–∂–∏—Ç –¥–µ–º–æ-—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –±–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫–∏ unit-—Ç–µ—Å—Ç–∞–º–∏.  

–î–ª—è –ø—Ä–∏–º–µ—Ä–∞ —Ç–µ—Å—Ç–∏—Ä—É–µ—Ç—Å—è –º–µ—Ç–æ–¥ `isCityWordPresent(String address)`, –∫–æ—Ç–æ—Ä—ã–π –æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç, —Å–æ–¥–µ—Ä–∂–∏—Ç –ª–∏ —Å—Ç—Ä–æ–∫–∞ —è–≤–Ω–æ–µ —É–∫–∞–∑–∞–Ω–∏–µ –Ω–∞ –≥–æ—Ä–æ–¥ (–Ω–∞–ø—Ä–∏–º–µ—Ä, "–≥–æ—Ä–æ–¥", "–≥.", "–ì." –∏ —Ç.–ø.).

- –ü–æ–∫—Ä—ã—Ç—ã —Ä–∞–∑–Ω—ã–µ —Ä–µ–≥–∏—Å—Ç—Ä—ã (`–≥.` / `–ì.` / `–≥–æ—Ä–æ–¥`)
- –ü—Ä–æ–≤–µ—Ä—è—é—Ç—Å—è –∞–±–±—Ä–µ–≤–∏–∞—Ç—É—Ä—ã –∏ –ø—Ä–æ–±–µ–ª—ã (`"–≥.–¢–∞—à–∫–µ–Ω—Ç"`, `"–≥. –¢–∞—à–∫–µ–Ω—Ç"`, `"–≥–æ—Ä–æ–¥–¢–∞—à–∫–µ–Ω—Ç"`)
- –û–±—Ä–∞–±–∞—Ç—ã–≤–∞—é—Ç—Å—è –ª–æ–∂–Ω—ã–µ —Å–æ–≤–ø–∞–¥–µ–Ω–∏—è (–Ω–∞–ø—Ä–∏–º–µ—Ä, `"–ù–æ–≤–≥–æ—Ä–æ–¥"`, `"–ì–æ—Ä–æ–¥–∏—â–µ"`, `"–≥–æ—Ä–æ–¥"` –±–µ–∑ –Ω–∞–∑–≤–∞–Ω–∏—è)

üß™ –í—Å–µ–≥–æ >25 –∫–µ–π—Å–æ–≤ –¥–ª—è —É–≤–µ—Ä–µ–Ω–Ω–æ–≥–æ –ø–æ–≤–µ–¥–µ–Ω–∏—è –º–µ—Ç–æ–¥–∞ –≤ —Ä–∞–∑–Ω—ã—Ö —É—Å–ª–æ–≤–∏—è—Ö. –≠—Ç–æ —Å–Ω–∏–∂–∞–µ—Ç —Ä–∏—Å–∫ –æ—à–∏–±–æ–∫ –ø—Ä–∏ –ø–∞—Ä—Å–∏–Ω–≥–µ –∞–¥—Ä–µ—Å–æ–≤ –∏–∑ –≤–Ω–µ—à–Ω–µ–≥–æ –∏—Å—Ç–æ—á–Ω–∏–∫–∞.


### üì¶ API: –†–∞–±–æ—Ç–∞ —Å –ª–æ–∫–∞—Ü–∏—è–º–∏ –∏ —Ä–∞—Å—Å—Ç–æ—è–Ω–∏–µ–º

–ö–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä `FreightRateController` –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç REST-—ç–Ω–¥–ø–æ–∏–Ω—Ç—ã –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –æ –≥–æ—Ä–æ–¥–∞—Ö –∏ —Ä–∞—Å—á–µ—Ç–∞ —Ä–∞—Å—Å—Ç–æ—è–Ω–∏–π –º–µ–∂–¥—É –Ω–∏–º–∏.

---

#### üîç GET `/api/rates/location`

–í–æ–∑–≤—Ä–∞—â–∞–µ—Ç –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ –≥–æ—Ä–æ–¥–µ –Ω–∞ –æ—Å–Ω–æ–≤–µ –µ–≥–æ –Ω–∞–∑–≤–∞–Ω–∏—è.

**–ü–∞—Ä–∞–º–µ—Ç—Ä—ã –∑–∞–ø—Ä–æ—Å–∞:**

| –ü–∞—Ä–∞–º–µ—Ç—Ä  | –¢–∏–ø    | –û–±—è–∑–∞—Ç–µ–ª–µ–Ω | –û–ø–∏—Å–∞–Ω–∏–µ                   |
|-----------|--------|------------|----------------------------|
| cityName  | string | ‚úÖ         | –ù–∞–∑–≤–∞–Ω–∏–µ –≥–æ—Ä–æ–¥–∞            |

**–ü—Ä–∏–º–µ—Ä –∑–∞–ø—Ä–æ—Å–∞:**
```
GET /api/rates/location?cityName=–ú–æ—Å–∫–≤–∞
```
**–ü—Ä–∏–º–µ—Ä –æ—Ç–≤–µ—Ç–∞:**
```json
{
  "id": 10,
  "normalizedName": "–ú–æ—Å–∫–≤–∞",
  "coordinates": "37.617698 55.755864",
  "description": "–†–æ—Å—Å–∏—è, –ú–æ—Å–∫–≤–∞"
}
```

#### üìè GET `/api/rates/distance`

–†–∞—Å—Å—á–∏—Ç—ã–≤–∞–µ—Ç —Ä–∞—Å—Å—Ç–æ—è–Ω–∏–µ –º–µ–∂–¥—É –¥–≤—É–º—è –≥–æ—Ä–æ–¥–∞–º–∏.

**–ü–∞—Ä–∞–º–µ—Ç—Ä—ã –∑–∞–ø—Ä–æ—Å–∞:**

| –ü–∞—Ä–∞–º–µ—Ç—Ä    | –¢–∏–ø    | –û–±—è–∑–∞—Ç–µ–ª–µ–Ω | –û–ø–∏—Å–∞–Ω–∏–µ          |
|-------------|--------|------------|-------------------|
| origin      | string | ‚úÖ          | –ì–æ—Ä–æ–¥ –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–∏—è |
| destination | string | ‚úÖ          | –ì–æ—Ä–æ–¥ –Ω–∞–∑–Ω–∞—á–µ–Ω–∏—è  |

**–ü—Ä–∏–º–µ—Ä –∑–∞–ø—Ä–æ—Å–∞:**
```
GET /api/rates/distance?origin=–ú–∞—Ä–≥–∏–ª–∞–Ω&destination=–ú–æ—Å–∫–≤–∞
```

**–ü—Ä–∏–º–µ—Ä –æ—Ç–≤–µ—Ç–∞:**
```json
{
  "id": 5,
  "origin": {
    "id": 15,
    "normalizedName": "–ú–∞—Ä–≥–∏–ª–∞–Ω",
    "coordinates": "71.720774 40.469065",
    "description": "–£–∑–±–µ–∫–∏—Å—Ç–∞–Ω, –§–µ—Ä–≥–∞–Ω—Å–∫–∞—è –æ–±–ª–∞—Å—Ç—å, –ú–∞—Ä–≥–∏–ª–∞–Ω"
  },
  "destination": {
    "id": 10,
    "normalizedName": "–ú–æ—Å–∫–≤–∞",
    "coordinates": "37.617698 55.755864",
    "description": "–†–æ—Å—Å–∏—è, –ú–æ—Å–∫–≤–∞"
  },
  "distance": 4515.16,
  "fetchDate": [
    2025,
    6,
    16
  ]
}
```

## üöÄ –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç

### 1. –ö–ª–æ–Ω–∏—Ä–æ–≤–∞—Ç—å —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π

```shell
git clone https://github.com/mirsaidmir/FreightRateCalculator.git
cd FreightRateCalculator
```

### 2. –ù–∞—Å—Ç—Ä–æ–∏—Ç—å –±–∞–∑—É –¥–∞–Ω–Ω—ã—Ö PostgreSQL
–°–æ–∑–¥–∞–π—Ç–µ –±–∞–∑—É –∏ —É–∫–∞–∂–∏—Ç–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –≤ `application.properties`

```properties
spring.datasource.url=jdbc:postgresql://localhost:5433/freight
spring.datasource.username={username}
spring.datasource.password={password}
```

### 3. –ó–∞–ø—É—Å—Ç–∏—Ç—å –ø—Ä–æ–µ–∫—Ç

```shell
./mvnw clean spring-boot:run
```

## üê≥ Docker
```dockerfile
docker build -t freight-rate-calculator .
docker run -p 8080:8080 freight-rate-calculator
```


## üìò –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è API (Swagger)

–í –ø—Ä–æ–µ–∫—Ç–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è [**SpringDoc OpenAPI**](https://springdoc.org/) –¥–ª—è –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ Swagger-–¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏.

### üîó –î–æ—Å—Ç—É–ø:
–ü–æ—Å–ª–µ –∑–∞–ø—É—Å–∫–∞ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è:

- Swagger UI: [http://localhost:8080/swagger-ui.html](http://localhost:8080/swagger-ui.html)
- OpenAPI JSON: [http://localhost:8080/v3/api-docs](http://localhost:8080/v3/api-docs)

### üì¶ –ó–∞–≤–∏—Å–∏–º–æ—Å—Ç—å –≤ `pom.xml`:
```xml
<dependency>
  <groupId>org.springdoc</groupId>
  <artifactId>springdoc-openapi-starter-webmvc-ui</artifactId>
  <version>2.5.0</version>
</dependency>
```
Swagger-ui.html:
![swagger-ui.html](docs/swagger.png)

Schemas:
![schames](docs/schemas.png)

api-auth-register:
![api-auth-register](docs/api-auth-register.png)

api-rates-distance:
![api-auth-register](docs/api-rates-distance.png)